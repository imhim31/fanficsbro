<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fanfics</title>
  <link rel="icon" href="https://cdn.glitch.global/381f1ea9-3b68-4215-8c0b-5811be8e5192/a.PNG?v=1731478429002" type="image/icon type">
</head>

<body>

<h1 class="h1background">Can read again</h1>
<div class="emojiDiv">
  <div class="background">
    -this could be a city (THE GOAT, slowest burn, charlie and dean besties, WHOLSOME ASF <a class="emoji">happy</a>, i love it, bennyxdean)
    <a class="emoji">star</a><a target="_blank" href="https://archiveofourown.org/works/21719980/chapters/51809620">link</a><a class="emoji">star</a><br>

    -the place where tyrants must lament (most goated butchlander fic unironically <a class="emoji">proud</a>)
    <a class="emoji">star</a><a target="_blank" href="https://archiveofourown.org/works/40799577/chapters/102230739">link</a><a class="emoji">star</a><br>

    -He Won't Tell You That He Loves You (house realizes hes in love w his best bud and starts acting weird, nice one couldnt stop reading) 
    <a class="emoji">star</a><a target="_blank" href="https://archiveofourown.org/works/23894611/chapters/57445597">link</a><a class="emoji">star</a><br>

    -There's Something About Corbett(hilarious wholesome short cobett/ed)
    <a class="emoji">star</a><a target="_blank" href="https://archiveofourown.org/works/16633565">link</a><a class="emoji">star</a><br>
    
    <!-- New entries will be added here -->
    <div id="entries1"></div>
    
    <!-- Add new entry for Can read again -->
    <div class="add-entry">
      <input type="text" id="name1" placeholder="Title" class="entry-input name-input">
      <input type="text" id="desc1" placeholder="Description" class="entry-input desc-input">
      <input type="text" id="link1" placeholder="URL" class="entry-input link-input">
      <button onclick="addEntry(1)" class="add-btn">Add</button>
    </div>
  </div>
</div>
  
<br><br><br>
<h1 class="h1background">Shorties</h1>
<div class="emojiDiv">
  <div class="background">
    -A Differential Diagnosis for Green Silk
    (When he first notices the green tie, he treats it as a joke. hilson) 
    <a class="emoji">star</a><a target="_blank" href="https://archiveofourown.org/works/180692?view_adult=true">link</a><a class="emoji">star</a><br>

    -Late Love in Early Spring
    (House has been pestering Wilson all week with his advice for wooing Cuddy. Wilson doesn't mind it, but it makes him think about some thingsâ€¦ hilson) <br>
    <a class="emoji">star</a><a target="_blank" href="https://archiveofourown.org/works/60611665">link</a><a class="emoji">star</a><br>  

    -the escalated butt dial (highkey hilarious, hilson)
    <a class="emoji">star</a><a target="_blank" href="https://archiveofourown.org/works/45394612?view_full_work=true">link</a><a class="emoji">star</a><br>  
    
    -to search for worry, is to love without deceit (Really short, a little funny, a little sad, hilson)
    <a class="emoji">star</a><a target="_blank" href="https://archiveofourown.org/works/60825844?view_adult=true">link</a><a class="emoji">star</a><br>  
    
    -keep me where the light is (lowkey mid, can be read in a night, hilson)
    <a class="emoji">star</a><a target="_blank" href="https://archiveofourown.org/works/46210411">link</a><a class="emoji">star</a><br>
    
    <!-- New entries will be added here -->
    <div id="entries2"></div>
    
    <!-- Add new entry for Shorties -->
    <div class="add-entry">
      <input type="text" id="name2" placeholder="Title" class="entry-input name-input">
      <input type="text" id="desc2" placeholder="Description" class="entry-input desc-input">
      <input type="text" id="link2" placeholder="URL" class="entry-input link-input">
      <button onclick="addEntry(2)" class="add-btn">Add</button>
    </div>
  </div>
</div>

<br><br><br>
<h1 class="h1background">Not rlly worth reading again</h1>
<div class="emojiDiv">
  <div class="background">
    -ZnMoO4 (weird, stockhome def, butchlander) might be zinc molybdate idk<br>
    -the construction of homelande (L butchlander in highschool a lot of pedos didnt read all dat)<br>
    -of blood and fangs (didnt like, dean and benny, very teenage girl Dean vibes<a class="emoji">nerd</a>)
    
    <!-- New entries will be added here -->
    <div id="entries3"></div>
    
    <!-- Add new entry for Not rlly worth reading again -->
    <div class="add-entry">
      <input type="text" id="name3" placeholder="Title" class="entry-input name-input">
      <input type="text" id="desc3" placeholder="Description" class="entry-input desc-input">
      <input type="text" id="link3" placeholder="URL" class="entry-input link-input">
      <button onclick="addEntry(3)" class="add-btn">Add</button>
    </div>
  </div>
</div>

<button onclick="document.location='/emojis.html'" style="background-color: #ff8f0f; border: 2px solid #f74dab; font-size:200%;"> Emojis </button>

<br><br>
<div class="footer">
  <img class="footimg" src="https://cdn.glitch.global/381f1ea9-3b68-4215-8c0b-5811be8e5192/b.png?v=1731478434939" alt="" width="30%" height="30%">
  <img src="https://cdn.glitch.global/381f1ea9-3b68-4215-8c0b-5811be8e5192/b.png?v=1731478434939" alt="" width="30%" height="30%">
  <img src="https://cdn.glitch.global/381f1ea9-3b68-4215-8c0b-5811be8e5192/b.png?v=1731478434939" alt="" width="30%" height="30%">
</div>

<style>
.add-entry {
  margin-top: 20px;
  display: flex;
  gap: 8px;
  padding: 10px;
  flex-wrap: wrap;
  align-items: center;
}

.entry-input {
  padding: 8px;
  border: 2px solid #f74dab;
  background-color: white;
  font-family: verdana;
  color: #333;
  font-size: 12px;
}

.name-input {
  flex: 2;
  min-width: 120px;
}

.desc-input {
  flex: 3;
  min-width: 150px;
}

.link-input {
  flex: 2;
  min-width: 150px;
}

.add-btn {
  background-color: #ff8f0f;
  border: 2px solid #f74dab;
  color: white;
  padding: 8px 15px;
  cursor: pointer;
  font-family: verdana;
  font-weight: bold;
  font-size: 12px;
  white-space: nowrap;
}

.add-btn:hover {
  background-color: #ff9f2f;
}

body {
  background-color: #ff9ed4;
  margin: 0;
  padding: 20px;
}

.background{
  background-color: rgba(247, 77, 171);
  color: white;
  font-family: verdana;
  border-style: dashed;
  border-color: white; 
  padding: 20px;
  margin: 0;
}

.h1background{
  background-color: rgba(247, 77, 171);
  color: white;
  padding: 10px;
  margin: 0;
}

.footer{
  position: relative;
  margin-top: 40px;
  text-align: center;
}

.xd{
  position: relative;
  top: 2.5%;
  height: 19px;
  background-size: cover;
  background-color: rgba(204, 204, 204, 0);
}

.emojiDiv {
  display: block;
  margin-bottom: 40px;
}

*{
  cursor: url(https://ani.cursors-4u.net/smiley/smi-3/smi310.cur), auto !important;
}

/* unvisited link */
a:link {
  color: #f74dab;
  background-image: url('https://i.pinimg.com/564x/fa/df/76/fadf76666e257d5a2d0375f96f791159.jpg');
  text-decoration: none;
  background-size: 100% 100%;
  cursor: url(https://ani.cursors-4u.net/smiley/smi-3/smi283.cur), auto !important;
}

/* visited link */
a:visited {
  color: #f74dab;
  background-image: url('https://i.pinimg.com/564x/fa/df/76/fadf76666e257d5a2d0375f96f791159.jpg');
  text-decoration: none;
  background-size: 100% 100%;
  cursor: url(https://ani.cursors-4u.net/smiley/smi-3/smi283.cur), auto !important;
}

button {
  color: #f74dab;
  background-image: url('https://i.pinimg.com/564x/fa/df/76/fadf76666e257d5a2d0375f96f791159.jpg');
  text-decoration: none;
  background-size: 100% 100%;
  cursor: url(https://ani.cursors-4u.net/smiley/smi-3/smi283.cur), auto !important;
}
</style>

<script>
// Your existing emoji code
var elements = document.getElementsByClassName("emoji");
const myJSON = '{"star":"https://cdn.glitch.global/381f1ea9-3b68-4215-8c0b-5811be8e5192/a.gif","nerd":"https://cdn.glitch.global/381f1ea9-3b68-4215-8c0b-5811be8e5192/8500-toro-nerd.gif?v=1731489114587","catnono":"https://cdn.glitch.global/381f1ea9-3b68-4215-8c0b-5811be8e5192/3258-toro-big-nono.gif?v=1731489079862","catdancing":"https://cdn.glitch.global/381f1ea9-3b68-4215-8c0b-5811be8e5192/1299-toro-cat-danceheart.gif?v=1731489096338","catangry":"https://cdn.glitch.global/381f1ea9-3b68-4215-8c0b-5811be8e5192/8500-toro-superangry.gif?v=1731489117693","bearkiss":"https://cdn.glitch.global/381f1ea9-3b68-4215-8c0b-5811be8e5192/3155-pastelbear-kiss.gif?v=1731489101861","beareat":"https://cdn.glitch.global/381f1ea9-3b68-4215-8c0b-5811be8e5192/3609-pastelbear-eat.gif?v=1731489109327","teddybear":"https://cdn.glitch.global/381f1ea9-3b68-4215-8c0b-5811be8e5192/97835-teddybear.png?v=1731489181476","kirbyyay":"https://cdn.glitch.global/381f1ea9-3b68-4215-8c0b-5811be8e5192/14220-kirbyyay.gif?v=1731489121227","kirbyyes":"https://cdn.glitch.global/381f1ea9-3b68-4215-8c0b-5811be8e5192/26459-kirbyyes.gif?v=1731489125073","proud":"https://cdn.glitch.global/381f1ea9-3b68-4215-8c0b-5811be8e5192/33701-tiktokproud.png?v=1731489173601","happy":"https://cdn.glitch.global/381f1ea9-3b68-4215-8c0b-5811be8e5192/8194-tt-happy.png?v=1731489157323", "ttflushed":"https://cdn.glitch.global/381f1ea9-3b68-4215-8c0b-5811be8e5192/1514-tt-flushed.png?v=1731489129181", "ttthumbsup":"https://cdn.glitch.global/381f1ea9-3b68-4215-8c0b-5811be8e5192/1662-tt-thumbs-up.png?v=1731489131217","ttannoyed":"https://cdn.glitch.global/381f1ea9-3b68-4215-8c0b-5811be8e5192/2489-tt-annoyed.png?v=1731489135623", "ttangry":"https://cdn.glitch.global/381f1ea9-3b68-4215-8c0b-5811be8e5192/3887-tt-angry.png?v=1731489138960", "ttdrool":"https://cdn.glitch.global/381f1ea9-3b68-4215-8c0b-5811be8e5192/6754-tt-drool.png?v=1731489142879", "ttsulk":"https://cdn.glitch.global/381f1ea9-3b68-4215-8c0b-5811be8e5192/7290-tt-sulk.png?v=1731489145336","ttrollingeyes":"https://cdn.glitch.global/381f1ea9-3b68-4215-8c0b-5811be8e5192/7576-tt-rolling-eyes.png?v=1731489151338", "ttthinking":"https://cdn.glitch.global/381f1ea9-3b68-4215-8c0b-5811be8e5192/8082-tt-thinking.png?v=1731489153708","ttweep":"https://cdn.glitch.global/381f1ea9-3b68-4215-8c0b-5811be8e5192/8743-tt-weep.png?v=1731489160109","ttshy":"https://cdn.glitch.global/381f1ea9-3b68-4215-8c0b-5811be8e5192/8812-tt-shy.png?v=1731489163671","ttsobbing":"https://cdn.glitch.global/381f1ea9-3b68-4215-8c0b-5811be8e5192/10529-tt-sobbing.png?v=1731489166715", "ttuhuh":"https://cdn.glitch.global/381f1ea9-3b68-4215-8c0b-5811be8e5192/39582-uhuh.png?v=1731489177292","ttheh":"https://cdn.glitch.global/381f1ea9-3b68-4215-8c0b-5811be8e5192/30920-heh.png?v=1731489171141"}';
const myObj = JSON.parse(myJSON);

// Process existing emojis
for (let i in myObj) {
  let link = myObj[i];
  for(var x = 0; x < elements.length; x++) {
    let name = elements[x].innerHTML;
    if (name == i){
      elements[x].innerHTML = `<img class="xd" src="${link}">`;
    }
  }
}

// Gist config - UPDATE THESE!
const GIST_ID = 'c11c40294576c363f5f77cb6fb2b7046';
const GITHUB_TOKEN = ''; // Optional but recommended

// Function to process emojis in newly added content
function processNewEmojis(container) {
  const newEmojis = container.getElementsByClassName('emoji');
  for (let i = 0; i < newEmojis.length; i++) {
    const emoji = newEmojis[i];
    const emojiName = emoji.innerHTML;
    if (myObj[emojiName]) {
      emoji.innerHTML = `<img class="xd" src="${myObj[emojiName]}" alt="${emojiName}">`;
    }
  }
}

// Gist functions
async function loadAllEntries() {
  for (let i = 1; i <= 3; i++) {
    const entries = await loadFromGist(i);
    entries.forEach(entry => {
      addEntryToPage(i, entry);
    });
  }
}

async function loadFromGist(sectionNumber) {
  try {
    const response = await fetch(`https://api.github.com/gists/${GIST_ID}`);
    const gist = await response.json();
    const data = JSON.parse(gist.files['fanfics.json'].content);
    return data[`section${sectionNumber}`] || [];
  } catch (error) {
    console.log('Gist load failed, using localStorage');
    return JSON.parse(localStorage.getItem(`fanfics-section${sectionNumber}`)) || [];
  }
}

async function saveToGist(sectionNumber, entries) {
  try {
    // Get current gist data
    const response = await fetch(`https://api.github.com/gists/${GIST_ID}`);
    const gist = await response.json();
    const currentData = JSON.parse(gist.files['fanfics.json'].content);
    
    // Update the section
    currentData[`section${sectionNumber}`] = entries;
    
    // Save back to gist
    await fetch(`https://api.github.com/gists/${GIST_ID}`, {
      method: 'PATCH',
      headers: {
        'Authorization': `token ${GITHUB_TOKEN}`,
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        files: {
          'fanfics.json': {
            content: JSON.stringify(currentData, null, 2)
          }
        }
      })
    });
  } catch (error) {
    console.log('Gist save failed, using localStorage');
    localStorage.setItem(`fanfics-section${sectionNumber}`, JSON.stringify(entries));
  }
}

// Entry functions
async function addEntry(sectionNumber) {
  const nameInput = document.getElementById(`name${sectionNumber}`);
  const descInput = document.getElementById(`desc${sectionNumber}`);
  const linkInput = document.getElementById(`link${sectionNumber}`);
  
  const name = nameInput.value.trim();
  const desc = descInput.value.trim();
  const link = linkInput.value.trim();
  
  if (!name) {
    alert('Please enter a title!');
    return;
  }
  
  const entry = { name, desc, link };
  
  // Get current entries, add new one, save to gist
  const currentEntries = await loadFromGist(sectionNumber);
  currentEntries.push(entry);
  await saveToGist(sectionNumber, currentEntries);
  
  // Add to page
  addEntryToPage(sectionNumber, entry);
  
  // Clear inputs
  nameInput.value = '';
  descInput.value = '';
  linkInput.value = '';
}

function addEntryToPage(sectionNumber, entry) {
  const entriesContainer = document.getElementById(`entries${sectionNumber}`);
  const newEntry = document.createElement('div');
  newEntry.innerHTML = `-${entry.name}${entry.desc ? ` (${entry.desc})` : ''}${entry.link ? ` <a class="emoji">star</a><a target="_blank" href="${entry.link}">link</a><a class="emoji">star</a>` : ''}<br>`;
  entriesContainer.appendChild(newEntry);
  processNewEmojis(newEntry);
}

// Load saved entries when page loads
document.addEventListener('DOMContentLoaded', loadAllEntries);
</script>
</body>
</html>
